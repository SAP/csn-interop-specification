{
  "description": "JSON Schema with custom (x-) properties",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://sap.github.io/csn-interop-specification/spec-v1/consumption.schema.json#",
  "title": "@Consumption",
  "definitions": {
    "@Consumption.valueHelpDefinition": {
      "type": "array",
      "description": "The property defines how value helps for this element shall be constructed.\n\nIt allows to associate a (set of) View/Entity that provides the \"Value Help\" for the annotated field or parameter.\nThis is achieved by either referencing the target view/entity of a modelled association or by directly establishing a relationship to view/entity that shall act as a value help provider.",
      "items": {
        "title": "Consumption Value Help Definition",
        "type": "object",
        "properties": {
          "entity": {
            "x-context": [
              "./spec/v1/annotations/consumption.yaml",
              "@Consumption.ConsumptionValueHelpDefinition",
              "entity"
            ],
            "title": "Consumption Value Help Definition",
            "description": "Value help defining view or entity.",
            "type": "object",
            "properties": {
              "name": {
                "type": "string",
                "description": "Name of the value help providing view or entity",
                "x-context": [
                  "./spec/v1/annotations/consumption.yaml",
                  "@Consumption.ConsumptionValueHelpDefinition.Entity",
                  "name"
                ]
              },
              "element": {
                "type": "string",
                "description": "Name of the field of the value help view or entity, which the annotated local field or parameter is bound to.\n\nMutually exclusive to the usage of `valueHelpDefinition.association`.",
                "x-context": [
                  "./spec/v1/annotations/consumption.yaml",
                  "@Consumption.ConsumptionValueHelpDefinition.Entity",
                  "element"
                ]
              }
            },
            "additionalProperties": false
          },
          "additionalBinding": {
            "type": "array",
            "items": {
              "title": "Additional Binding",
              "description": "Allows to define additional bindings (besides the ones defined by `valueHelpDefinition.association` or `valueHelpDefinition.entity`) for filtering the value help result list and/or returning values from the selected value help record.",
              "type": "object",
              "properties": {
                "localElement": {
                  "type": "string",
                  "description": "Field of the current view/entity; mutually exclusive to the usage of `localParameter`.",
                  "x-context": [
                    "./spec/v1/annotations/consumption.yaml",
                    "@Consumption.ConsumptionValueHelpDefinition.AdditionalBinding",
                    "localElement"
                  ]
                },
                "element": {
                  "type": "string",
                  "description": "Name of the field of the value help view or entity, which the annotated local field or parameter is bound to.",
                  "x-context": [
                    "./spec/v1/annotations/consumption.yaml",
                    "@Consumption.ConsumptionValueHelpDefinition.AdditionalBinding",
                    "element"
                  ]
                },
                "usage": {
                  "x-context": [
                    "./spec/v1/annotations/consumption.yaml",
                    "@Consumption.ConsumptionValueHelpDefinition.AdditionalBinding",
                    "usage"
                  ],
                  "type": "object",
                  "description": "The binding may either specify an additional filter-criterion on the value help list (`#FILTER`), or an additional result mapping for the selected value help record (`#RESULT`) or a combination thereof (`#FILTER_AND_RESULT`).\nIf not specified explicitly the usage is `#FILTER_AND_RESULT`.\nIf distinctValues is set to true, additional bindings must specify the usage as `#FILTER`.",
                  "properties": {
                    "#": {
                      "type": "string",
                      "description": "Provide the value in `{ \"#\": \"<value>\" }` enum notation.",
                      "enum": [
                        "FILTER",
                        "RESULT",
                        "FILTER_AND_RESULT"
                      ],
                      "default": "FILTER_AND_RESULT",
                      "x-context": [
                        "./spec/v1/annotations/consumption.yaml",
                        "@Consumption.ConsumptionValueHelpDefinition.AdditionalBinding.Usage",
                        "#"
                      ]
                    }
                  },
                  "additionalProperties": false,
                  "required": [
                    "#"
                  ],
                  "examples": [
                    {
                      "#": "FILTER_AND_RESULT"
                    }
                  ],
                  "title": "@Consumption.ConsumptionValueHelpDefinition.AdditionalBinding.Usage"
                }
              },
              "additionalProperties": false,
              "x-context": [
                "./spec/v1/annotations/consumption.yaml",
                "@Consumption.ConsumptionValueHelpDefinition.AdditionalBinding"
              ]
            },
            "description": "Additional bindings for filtering the value help result list.",
            "x-context": [
              "./spec/v1/annotations/consumption.yaml",
              "@Consumption.ConsumptionValueHelpDefinition",
              "additionalBinding"
            ]
          },
          "association": {
            "description": "Reference to the modelled association (in local entity) for which the target view represents the value help providing view or entity for the annotated local field. The on-condition of the association may only contain bindings of the source and target fields that use an equal operator. All these bindings are automatically considered by the value help for both filter and result mappings.\nMutually exclusive to the usage of `valueHelpDefinition.entity`.",
            "x-context": [
              "./spec/v1/annotations/consumption.yaml",
              "@Consumption.ConsumptionValueHelpDefinition",
              "association"
            ],
            "title": "Element Reference",
            "oneOf": [
              {
                "title": "Element Reference String",
                "type": "string",
                "description": "Element reference to an element within the current entity, using string notation.\n\nThe referenced element MUST exist locally in the same entity.\n\n```js\n\"<definition name>\": {\n  \"<annotation key of type ElementReference>\": \"<element name>\"\n```"
              },
              {
                "title": "Element Reference Object",
                "type": "object",
                "description": "Element reference to an element within the current entity, using RECOMMENDED object notation.\n\nThe referenced element MUST exist locally in the same entity.\n\n```js\n\"<definition name>\": {\n  \"<annotation key of type ElementReference>\": {\"=\": \"<element name>\"}\n```",
                "properties": {
                  "=": {
                    "type": "string",
                    "description": "This is the references elements name.",
                    "x-association-target": [
                      "#/definitions/CdsType"
                    ]
                  }
                },
                "required": [
                  "="
                ],
                "additionalProperties": false
              }
            ]
          },
          "distinctValues": {
            "type": "boolean",
            "description": "Specifies whether the value help result list shall only contain distinct values for the annotated field or parameter.\nIf set to true all mappings will be used for filtering, but only the value for the field/parameter which the value help was requested for will be returned by the value help.",
            "default": true,
            "x-context": [
              "./spec/v1/annotations/consumption.yaml",
              "@Consumption.ConsumptionValueHelpDefinition",
              "distinctValues"
            ]
          }
        },
        "additionalProperties": false,
        "examples": [
          {
            "entity": {
              "name": "I_ControllingAreaStdVH",
              "element": "ControllingArea"
            }
          },
          {
            "entity": {
              "name": "I_CostCenterStdVH",
              "element": "CostCenter"
            },
            "additionalBinding": [
              {
                "localElement": "ControllingArea",
                "element": "ControllingArea"
              }
            ]
          },
          {
            "association": {
              "=": "to_Airline"
            }
          }
        ],
        "x-context": [
          "./spec/v1/annotations/consumption.yaml",
          "@Consumption.ConsumptionValueHelpDefinition"
        ]
      },
      "x-extension-targets": [
        "Entity",
        "Type"
      ],
      "title": "@Consumption.valueHelpDefinition",
      "x-context": [
        "./spec/v1/annotations/consumption.yaml",
        "@Consumption.valueHelpDefinition"
      ]
    },
    "@Consumption.ConsumptionValueHelpDefinition": {
      "title": "Consumption Value Help Definition",
      "type": "object",
      "properties": {
        "entity": {
          "x-context": [
            "./spec/v1/annotations/consumption.yaml",
            "@Consumption.ConsumptionValueHelpDefinition",
            "entity"
          ],
          "title": "Consumption Value Help Definition",
          "description": "Value help defining view or entity.",
          "type": "object",
          "properties": {
            "name": {
              "type": "string",
              "description": "Name of the value help providing view or entity",
              "x-context": [
                "./spec/v1/annotations/consumption.yaml",
                "@Consumption.ConsumptionValueHelpDefinition.Entity",
                "name"
              ]
            },
            "element": {
              "type": "string",
              "description": "Name of the field of the value help view or entity, which the annotated local field or parameter is bound to.\n\nMutually exclusive to the usage of `valueHelpDefinition.association`.",
              "x-context": [
                "./spec/v1/annotations/consumption.yaml",
                "@Consumption.ConsumptionValueHelpDefinition.Entity",
                "element"
              ]
            }
          },
          "additionalProperties": false
        },
        "additionalBinding": {
          "type": "array",
          "items": {
            "title": "Additional Binding",
            "description": "Allows to define additional bindings (besides the ones defined by `valueHelpDefinition.association` or `valueHelpDefinition.entity`) for filtering the value help result list and/or returning values from the selected value help record.",
            "type": "object",
            "properties": {
              "localElement": {
                "type": "string",
                "description": "Field of the current view/entity; mutually exclusive to the usage of `localParameter`.",
                "x-context": [
                  "./spec/v1/annotations/consumption.yaml",
                  "@Consumption.ConsumptionValueHelpDefinition.AdditionalBinding",
                  "localElement"
                ]
              },
              "element": {
                "type": "string",
                "description": "Name of the field of the value help view or entity, which the annotated local field or parameter is bound to.",
                "x-context": [
                  "./spec/v1/annotations/consumption.yaml",
                  "@Consumption.ConsumptionValueHelpDefinition.AdditionalBinding",
                  "element"
                ]
              },
              "usage": {
                "x-context": [
                  "./spec/v1/annotations/consumption.yaml",
                  "@Consumption.ConsumptionValueHelpDefinition.AdditionalBinding",
                  "usage"
                ],
                "type": "object",
                "description": "The binding may either specify an additional filter-criterion on the value help list (`#FILTER`), or an additional result mapping for the selected value help record (`#RESULT`) or a combination thereof (`#FILTER_AND_RESULT`).\nIf not specified explicitly the usage is `#FILTER_AND_RESULT`.\nIf distinctValues is set to true, additional bindings must specify the usage as `#FILTER`.",
                "properties": {
                  "#": {
                    "type": "string",
                    "description": "Provide the value in `{ \"#\": \"<value>\" }` enum notation.",
                    "enum": [
                      "FILTER",
                      "RESULT",
                      "FILTER_AND_RESULT"
                    ],
                    "default": "FILTER_AND_RESULT",
                    "x-context": [
                      "./spec/v1/annotations/consumption.yaml",
                      "@Consumption.ConsumptionValueHelpDefinition.AdditionalBinding.Usage",
                      "#"
                    ]
                  }
                },
                "additionalProperties": false,
                "required": [
                  "#"
                ],
                "examples": [
                  {
                    "#": "FILTER_AND_RESULT"
                  }
                ],
                "title": "@Consumption.ConsumptionValueHelpDefinition.AdditionalBinding.Usage"
              }
            },
            "additionalProperties": false,
            "x-context": [
              "./spec/v1/annotations/consumption.yaml",
              "@Consumption.ConsumptionValueHelpDefinition.AdditionalBinding"
            ]
          },
          "description": "Additional bindings for filtering the value help result list.",
          "x-context": [
            "./spec/v1/annotations/consumption.yaml",
            "@Consumption.ConsumptionValueHelpDefinition",
            "additionalBinding"
          ]
        },
        "association": {
          "description": "Reference to the modelled association (in local entity) for which the target view represents the value help providing view or entity for the annotated local field. The on-condition of the association may only contain bindings of the source and target fields that use an equal operator. All these bindings are automatically considered by the value help for both filter and result mappings.\nMutually exclusive to the usage of `valueHelpDefinition.entity`.",
          "x-context": [
            "./spec/v1/annotations/consumption.yaml",
            "@Consumption.ConsumptionValueHelpDefinition",
            "association"
          ],
          "title": "Element Reference",
          "oneOf": [
            {
              "title": "Element Reference String",
              "type": "string",
              "description": "Element reference to an element within the current entity, using string notation.\n\nThe referenced element MUST exist locally in the same entity.\n\n```js\n\"<definition name>\": {\n  \"<annotation key of type ElementReference>\": \"<element name>\"\n```"
            },
            {
              "title": "Element Reference Object",
              "type": "object",
              "description": "Element reference to an element within the current entity, using RECOMMENDED object notation.\n\nThe referenced element MUST exist locally in the same entity.\n\n```js\n\"<definition name>\": {\n  \"<annotation key of type ElementReference>\": {\"=\": \"<element name>\"}\n```",
              "properties": {
                "=": {
                  "type": "string",
                  "description": "This is the references elements name.",
                  "x-association-target": [
                    "#/definitions/CdsType"
                  ]
                }
              },
              "required": [
                "="
              ],
              "additionalProperties": false
            }
          ]
        },
        "distinctValues": {
          "type": "boolean",
          "description": "Specifies whether the value help result list shall only contain distinct values for the annotated field or parameter.\nIf set to true all mappings will be used for filtering, but only the value for the field/parameter which the value help was requested for will be returned by the value help.",
          "default": true,
          "x-context": [
            "./spec/v1/annotations/consumption.yaml",
            "@Consumption.ConsumptionValueHelpDefinition",
            "distinctValues"
          ]
        }
      },
      "additionalProperties": false,
      "examples": [
        {
          "entity": {
            "name": "I_ControllingAreaStdVH",
            "element": "ControllingArea"
          }
        },
        {
          "entity": {
            "name": "I_CostCenterStdVH",
            "element": "CostCenter"
          },
          "additionalBinding": [
            {
              "localElement": "ControllingArea",
              "element": "ControllingArea"
            }
          ]
        },
        {
          "association": {
            "=": "to_Airline"
          }
        }
      ],
      "x-context": [
        "./spec/v1/annotations/consumption.yaml",
        "@Consumption.ConsumptionValueHelpDefinition"
      ]
    },
    "@Consumption.ConsumptionValueHelpDefinition.Entity": {
      "title": "Consumption Value Help Definition",
      "description": "Value help defining view or entity.",
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "description": "Name of the value help providing view or entity",
          "x-context": [
            "./spec/v1/annotations/consumption.yaml",
            "@Consumption.ConsumptionValueHelpDefinition.Entity",
            "name"
          ]
        },
        "element": {
          "type": "string",
          "description": "Name of the field of the value help view or entity, which the annotated local field or parameter is bound to.\n\nMutually exclusive to the usage of `valueHelpDefinition.association`.",
          "x-context": [
            "./spec/v1/annotations/consumption.yaml",
            "@Consumption.ConsumptionValueHelpDefinition.Entity",
            "element"
          ]
        }
      },
      "additionalProperties": false,
      "x-context": [
        "./spec/v1/annotations/consumption.yaml",
        "@Consumption.ConsumptionValueHelpDefinition.Entity"
      ]
    },
    "@Consumption.ConsumptionValueHelpDefinition.AdditionalBinding": {
      "title": "Additional Binding",
      "description": "Allows to define additional bindings (besides the ones defined by `valueHelpDefinition.association` or `valueHelpDefinition.entity`) for filtering the value help result list and/or returning values from the selected value help record.",
      "type": "object",
      "properties": {
        "localElement": {
          "type": "string",
          "description": "Field of the current view/entity; mutually exclusive to the usage of `localParameter`.",
          "x-context": [
            "./spec/v1/annotations/consumption.yaml",
            "@Consumption.ConsumptionValueHelpDefinition.AdditionalBinding",
            "localElement"
          ]
        },
        "element": {
          "type": "string",
          "description": "Name of the field of the value help view or entity, which the annotated local field or parameter is bound to.",
          "x-context": [
            "./spec/v1/annotations/consumption.yaml",
            "@Consumption.ConsumptionValueHelpDefinition.AdditionalBinding",
            "element"
          ]
        },
        "usage": {
          "x-context": [
            "./spec/v1/annotations/consumption.yaml",
            "@Consumption.ConsumptionValueHelpDefinition.AdditionalBinding",
            "usage"
          ],
          "type": "object",
          "description": "The binding may either specify an additional filter-criterion on the value help list (`#FILTER`), or an additional result mapping for the selected value help record (`#RESULT`) or a combination thereof (`#FILTER_AND_RESULT`).\nIf not specified explicitly the usage is `#FILTER_AND_RESULT`.\nIf distinctValues is set to true, additional bindings must specify the usage as `#FILTER`.",
          "properties": {
            "#": {
              "type": "string",
              "description": "Provide the value in `{ \"#\": \"<value>\" }` enum notation.",
              "enum": [
                "FILTER",
                "RESULT",
                "FILTER_AND_RESULT"
              ],
              "default": "FILTER_AND_RESULT",
              "x-context": [
                "./spec/v1/annotations/consumption.yaml",
                "@Consumption.ConsumptionValueHelpDefinition.AdditionalBinding.Usage",
                "#"
              ]
            }
          },
          "additionalProperties": false,
          "required": [
            "#"
          ],
          "examples": [
            {
              "#": "FILTER_AND_RESULT"
            }
          ],
          "title": "@Consumption.ConsumptionValueHelpDefinition.AdditionalBinding.Usage"
        }
      },
      "additionalProperties": false,
      "x-context": [
        "./spec/v1/annotations/consumption.yaml",
        "@Consumption.ConsumptionValueHelpDefinition.AdditionalBinding"
      ]
    },
    "@Consumption.ConsumptionValueHelpDefinition.AdditionalBinding.Usage": {
      "type": "object",
      "description": "The binding may either specify an additional filter-criterion on the value help list (`#FILTER`), or an additional result mapping for the selected value help record (`#RESULT`) or a combination thereof (`#FILTER_AND_RESULT`).\nIf not specified explicitly the usage is `#FILTER_AND_RESULT`.\nIf distinctValues is set to true, additional bindings must specify the usage as `#FILTER`.",
      "properties": {
        "#": {
          "type": "string",
          "description": "Provide the value in `{ \"#\": \"<value>\" }` enum notation.",
          "enum": [
            "FILTER",
            "RESULT",
            "FILTER_AND_RESULT"
          ],
          "default": "FILTER_AND_RESULT",
          "x-context": [
            "./spec/v1/annotations/consumption.yaml",
            "@Consumption.ConsumptionValueHelpDefinition.AdditionalBinding.Usage",
            "#"
          ]
        }
      },
      "additionalProperties": false,
      "required": [
        "#"
      ],
      "examples": [
        {
          "#": "FILTER_AND_RESULT"
        }
      ],
      "title": "@Consumption.ConsumptionValueHelpDefinition.AdditionalBinding.Usage",
      "x-context": [
        "./spec/v1/annotations/consumption.yaml",
        "@Consumption.ConsumptionValueHelpDefinition.AdditionalBinding.Usage"
      ]
    }
  },
  "x-context": [
    "./spec/v1/annotations/consumption.yaml"
  ]
}